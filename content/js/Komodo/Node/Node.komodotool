{"keyboard_shortcut":"","name":"Node","language":"JavaScript","trigger_enabled":false,"value":["/** Node\r","*/\r","ko.extensions.TemplateExtension.Komodo.Node = (function()\r","{\r","\t\t\r","\tfunction Node()\r","\t{\r","\t\tvar $\t= require('ko/dom');\r","\t\tvar type\t= '';\r","\t\tvar node\t= null;\t\t\r","\t\t\r","\t\t/** Set type of node\r","\t\t * @param\tstring\t_type\tType of node\r","\t\t * @return\tself\r","\t\t */\r","\t\tthis.type = function(_type)\r","\t\t{\r","\t\t\ttype = _type;\r","\t\t\t\r","\t\t\tnode = document.createElement(type);\t\t\t\t\t\t\r","\r","\t\t\treturn this;\r","\t\t}; \r","\t\t/** Set attributes of node\r","\t\t * @param\tobject|string\tattributes\tObject of attributes for element, STRING is treated as label\r","\t\t *\r","\t\t * @return\tself \r","\t\t */\r","\t\tthis.attributes = function(attributes)\r","\t\t{\r","\t\t\tif( ! attributes )\r","\t\t\t\treturn this; \r","\t\t\t\r","\t\t\tif( typeof attributes === 'string' )\r","\t\t\t\tattributes = {label: attributes};\t\r","\t\t\t\r","\t\t\tfor(var attribute in attributes)\r","\t\t\t\tif (attributes.hasOwnProperty(attribute))\r","\t\t\t\t\tsetAttribute( attribute, attributes[attribute] );\t\t\t\t\t\r","\t\t\t\t\t//node.setAttribute( attribute, attributes[attribute] );\r","\t\t\r","\t\t\tsetDefaultId();\r","\r","\t\t\treturn this;  \r","\t\t};\r","\t\t/** Set attribute\r","\t\t */\r","\t\tvar setAttribute = function(attribute, value)\r","\t\t{\r","\t\t\t/** Sanitize attribute\r","\t\t\t */\r","\t\t\tvar sanitized_attribute = (function()\r","\t\t\t{\r","\t\t\t\tif( type=='checkbox' && attribute=='value' )\r","\t\t\t\t\tattribute = 'checked';\r","\t\t\t\t\r","\t\t\t\tif( attribute=='tooltip' )\r","\t\t\t\t\tattribute = 'tooltiptext';\r","\t\t\t\t\t\r","\t\t\t\treturn attribute;\r","\t\t\t})(); \r","\t\t\t\r","\t\t\tnode.setAttribute( sanitized_attribute, value );\r","\t\t}; \r","\t\t/** Set default Id by sanitized label if not id defined\r","\t\t */\r","\t\tvar setDefaultId = function()\r","\t\t{\r","\t\t\t/** Is auto id control\r","\t\t\t */\r","\t\t\tvar isAutoIdControl = function()\r","\t\t\t{\r","\t\t\t\treturn ['button'].indexOf( node.nodeName ) === -1;\r","\t\t\t}; \r","\t\t\t\r","\t\t\tif( ! isAutoIdControl() )\r","\t\t\t\treturn; \r","\t\t\t\r","\t\t\t/** Get sanitized id\r","\t\t\t */\r","\t\t\tvar sanitizeId = function(id)\r","\t\t\t{\r","\t\t\t\treturn id.replace(/[^a-z0-9\\s-_]/gi, '').replace(/\\s+/gi, '_').trim().toLowerCase();\r","\t\t\t};\r","\r","\t\t\tvar id\t= node.hasAttribute('id') ?  node.getAttribute('id') :  node.getAttribute('label');\r","\t\t\t\r","\t\t\tnode.setAttribute( 'id', sanitizeId(id) );\r","\t\t}; \r","\t\t\r","\t\t/** get\r","\t\t */\r","\t\tthis.get = function()\r","\t\t{\r","\t\t\t//console.log( node );\r","\t\t\treturn node;\r","\t\t}; \r","\t\t/** test\r","\t\t */ \r","\t\tthis.test = function()\r","\t\t{\r","\t\t\talert( 'TemplateExtension.Node.test()' ); \r","\t\t}; \r","\t}\r","\treturn Node;\r","\r","})();\r","\r","\r",""],"version":"1.0.12","rank":100,"async":false,"type":"macro","trigger":"trigger_postopen"}