{"keyboard_shortcut":"","name":"UI","language":"JavaScript","trigger_enabled":false,"value":["/** UI\r","* Manage extension`s ui elements\r","*\r","*/\r","ko.extensions.TemplateExtension.Komodo.UI = (function()\r","{\r","\t\t\r","\tfunction UI()\r","\t{\r","\t\t//var Logger\t= ko.extensions.Logger_v3 ? new ko.extensions.Logger_v3(this).clear(false).off(false) : require('ko/console');\r","\t\tvar self\t= this;\r","\t\tvar $\t= require('ko/dom');\r","\t\tvar document\t= document;\t\t\r","\r","\t\t/*---------------------------------------\r","\t\t\tSETUP\r","\t\t-----------------------------------------\r","\t\t*/\r","\t\t/** Set document where UI is operating, pane or preferences window\r","\t\t *\r","\t\t * @param\tstring\t_document\r","\t\t * @return\tself \r","\t\t */\r","\t\tthis.document = function(_document)\r","\t\t{\r","\t\t\tdocument = _document;\r","\t\t\treturn this;\r","\t\t};\r","\r","\t\t/** Query selector in document\r","\t\t * \r","\t\t * @param\tstring\tselector\tSelector of node\r","\t\t * @param\tstring\tselector\tSelector of parent, if null, then current document is used\r","\t\t * \r","\t\t * @return\ttype\t[QueryObject](https://docs.activestate.com/komodo/11/sdk/api/module-ko_dom-QueryObject.html)\r","\t\t */\r","\t\tthis.$ = function(selector, parent=null)\r","\t\t{\r","\t\t\t//if( ! selector.match(/^[#\\.]/) )\r","\t\t\t//\tselector = '#' +selector;\r","\t\t\tparent = parent ? this.$(parent).element() : document;\r","\r","\t\t\treturn $(selector, parent);\r","\t\t};\r","\t\t/** Exists\r","\t\t */\r","\t\tthis.exists = function(selector, parent=null)\r","\t\t{\r","\t\t\treturn typeof this.$(selector, parent).element()!=='undefined'; \r","\t\t}; \r","\t\t/** Create dom element or array of elements\r","\t\t * \r","\t\t * @example \r","\t\t *\t\t.create('checkbox', 'Checkbox 1')\t// single node, attribute is label\r","\t\t *\t\t.create('checkbox', {label: 'Checkbox 1'})\t// single node with attributes\t\t \r","\t\t *\t\t.create('checkbox', ['Checkbox 1', 'Checkbox 2'])\t// multiple nodes\r","\t\t *\t\t.create('checkbox', [{label: 'Checkbox 1'}, {label: 'Checkbox 2'}])\t// multiple nodes with attributes\r","\t\t *\r","\t\t *\t\t.create('groupbox')\t// node without attributes\r","\t\t *\t\t.create('groupbox', {id: 'gp_id'})\t// node with attributes\r","\t\t *\t\t.create('groupbox', null, ['checkbox', ['Checkbox 1', 'Checkbox 2']] )\t// node with children\r","\t\t *\t\t.create('groupbox', {id: 'gp_id'}, ['checkbox', ['Checkbox 1', 'Checkbox 2']] )\t// node with attributes and children\r","\t\t *\r","\t\t * @param\tstring\ttype\tType of node to append\r","\t\t * @param\tnull|string|object|[object] \t[attributes]\tAttributes for controls, define array of strings or array of objects for adding multiple nodes \r","\t\t * @param\t[type, attributes]\tchildren\tArray of attributes [type, attributes, create] for nested loop of create() function\r","\t\t * \r","\t\t * @return element|[elements] created node or array of created nodes\r","\t\t */\r","\t\tthis.create = function(type, attributes=null, children=null)\r","\t\t{\r","\t\t\t//console.log('---------------'); \r","\t\t\t/** Sanitize attributes\r","\t\t\t */\r","\t\t\tattributes = (function()\r","\t\t\t{\r","\t\t\t\treturn ! attributes ? [{}] : ( ! Array.isArray(attributes) ? [attributes] : attributes );\t\t\t\t\r","\t\t\t})();\r","\r","\t\t\tvar created_nodes = attributes.map(function(node_attributes)\r","\t\t\t{\r","\t\t\t\t//console.log(  'created_nodes: ' + type +' '+node_attributes.id );\r","\t\t\t\treturn new ko.extensions.TemplateExtension.Komodo.Node()\r","\t\t\t\t\t\t\t\t\t\t\t .type(type)\t\t\t\t\t\t\t\t\t\t\t\t\t \r","\t\t\t\t\t\t\t\t\t\t\t .attributes(node_attributes)\r","\t\t\t\t \t\t\t\t\t\t\t .get();\r","\t\t\t});\r"," \r","\t\t\t/** Last node\r","\t\t\t */\r","\t\t\tvar lastNode = created_nodes[created_nodes.length-1];\r","\t\t\t\r","\t\t\tif( children )\r","\t\t\t\tlastNode.appendChild ( this.create(children[0], children[1], children[2]) );\r","\t\t\t\r","\t\t\treturn created_nodes.length > 1 ? created_nodes : lastNode ;\r","\t\t};\r","\t\t/** Delete Node\r","\t\t */\r","\t\tthis.delete = function(selector_or_element, parent=null)\r","\t\t{\r","\t\t\tvar element\t= typeof selector_or_element === 'string' ? this.$(selector_or_element, parent) : selector_or_element;\r","\t\t\telement.parentNode.removeChild(element);\r","\t\t}; \r","\t\t/** Get element value\r","\t\t */\r","\t\tthis.value = function(selector_or_element)\r","\t\t{\r","\t\t\tvar element\t= typeof selector_or_element === 'string' ? this.$(selector_or_element) : selector_or_element;\r","\t\t\t\r","\t\t\t/** Test if getting only preferences,\r","\t\t\t* \t\tif so, then if control has not attribute prefs=\"false\"\r","\t\t\t*/\r","\t\t\tvar preference_test = only_prefs===false || element.getAttribute('prefs')!=='false';\r","\t\t\t\r","\t\t\t/** I control type node\r","\t\t\t*/\r","\t\t\tvar is_control_node = ['checkbox','textbox','radio'].indexOf( element.nodeName ) > -1;\r","\t\t\t\r","\t\t\t//if( element.id && is_control_node && preference_test )\r","\t\t\tif( element.id && is_control_node )\r","\t\t\t\treturn element.nodeName == 'checkbox' ? element.checked : element.value;\r","\t\t\t\r","\t\t\treturn null;\r","\t\t}; \r","\t\t/** Get values of parent node controls\r","\t\t * @param\tstring\tparam1\r","\t\t * @param\tmixed\tparam2\tif not false, then take only nodes without attribute prefs=\"false\"\r","\t\t * @return\t{id: value}\tObject of node ids and values\r","\t\t *\r","\t\t * @example values()\t// get all values from docuent\r","\t\t * @example values('#element')\t// get all values from element\r","\t\t * @example values('only-prefs')\t// get prefs values from docuent\r","\t\t * @example values('#element', 'only-prefs')\t// get prefs values from element\r","\t\t * \r","\t\t * @example values('#control', 'value to set')\t// set value to control\r","\t\t * @example values({'#control': 'value to set'})\t// mass set values by object\r","\t\t * \r","\t\t */\r","\t\tthis.values = function(param1, param2=false)\r","\t\t{\r","\t\t\t//console.log(  'UI.values(): ' + param1 );\r","\t\t\tconsole.log( document.childNodes );\r","\r","\t\t\treturn getValues(param1, param2);\r","\t\t};\r","\r","\t\t/** Append new children to node\r","\t\t *\r","\t\t * @param\tnode|string \tparent\tNode element or selector of parent to append children\r","\t\t * @param\telement|array\telements\tElement to append\r","\t\t * \r","\t\t * @return\tself \r","\t\t */\r","\t\tthis.append = function( parent_selector, elements )\r","\t\t{\r","\t\t\t//console.log( 'UI.append()' );\r","\t\t\t//console.log( elements );\r","\t\t\tparent = this.$(parent_selector);\r","\t\t\t\r","\t\t\t/** Parent id exists\r","\t\t\t *  it should EXISTS\r","\t\t\t */\r","\t\t\tvar parentIdExists = function()\r","\t\t\t{\r","\t\t\t\tif( self.exists(parent_selector) )\r","\t\t\t\t\treturn true;\r","\t\t\t\t\r","\t\t\t\talert( 'UI.append()\\n\\nPARENT ELEMENT DOES NOT EXISTS: '+parent_selector );\r","\t\t\t\treturn false;\r","\t\t\t}; \r","\t\t\t\r","\t\t\t///** Id not exists\r","\t\t\t// *  it should NOT EXISTS\r","\t\t\t// */\r","\t\t\t//var childIdExists = function(id)\r","\t\t\t//{\r","\t\t\t//\tconsole.log('childIdExists: '+id); \r","\t\t\t//\t//if( ! id || ! self.exists('#'+id, parent) )\r","\t\t\t//\tif( ! self.exists('#'+id) )\t\t\t\r","\t\t\t//\t\treturn false;\r","\t\t\t//\t\r","\t\t\t//\t//alert( 'UI.append()\\n\\nCHILD ID ALREADY EXISTS: #'+id );\r","\t\t\t//\talert( 'UI.append()\\n\\nChild in parent alerady exists\\n\\nPARENT: '+parent_selector+'\\nCHILD:    #'+id );\t\t\t\t\r","\t\t\t//\treturn true;\r","\t\t\t//};\r","\t\t\t\r","\t\t\tif( ! parentIdExists() )\r","\t\t\t\treturn;\r","\t\t\t \r","\t\t\tif( ! Array.isArray(elements) )\r","\t\t\t\telements = [elements];\t\r","\t\t\t\r","\t\t\tfor(let e=0; e<elements.length;e++)\r","\t\t\t\tparent.element().appendChild( elements[e] );\t\t\t\t\r","\t\t\t\r","\t\t\treturn this;\r","\t\t};\r","\t\t\r","\t\t/** Remove child element\r","\t\t * @param\tstring\tselector\tSelector of node\r","\t\t * @return\tself\r","\t\t */\r","\t\tthis.empty = function(selector, parent=null)\r","\t\t{\r","\t\t\tthis.$(selector, parent).empty();\r","\t\t\t\r","\t\t\treturn this;\r","\t\t};\r","\t\t/*---------------------------------------\r","\t\t\tPREFSET DOM\r","\t\t-----------------------------------------\r","\t\t*/\r","\t\t/** Create prefset dom with menu and toggable containers with controls.\r","\t\t * If exist, then prefset will be refreshed\r","\t\t *\r","\t\t * @param\tstring\tprefset_selector\tId of dom wrapper where menu abd all containers are inserted\r","\t\t * @param\tobject\tperfset_template\tRepresentation of container xul structure\r","\t\t * @param\tobject\tperfset_values\tData for pref set`s controls\r","\t\t *\r","\t\t * @example\r","\t\t *\t\tperfset_template = {\r","\t\t *\t\t\tpref_set_test:{ 'Prefset Caption': ['checkbox', 'checkbox'] }\r","\t\t * \t\t}\r","\t\t * \r","\t\t * \t\tperfset_values = {\r","\t\t *\t\t\t'conteiner-A':{\r","\t\t * \t\t\t\t'Control 1': true,\r","\t\t * \t\t\t\t'Control 2': false,\r","\t\t * \t\t\t}\r","\t\t * \t\t}\r","\t\t * \r","\t\t */\r","\t\tthis.createPrefSet = function(prefset_selector, perfset_template, perfset_values)\r","\t\t{\r","\t\t\tvar prefset_caption\t= Object.keys(perfset_template).pop();\t\t\t\t\t\t\r","\t\t\tvar control_types\t= perfset_template[prefset_caption];\r","\t\t\tvar containers_ids\t= Object.keys(perfset_values);\t\t\r","\t\t\tvar container_class_shown\t= prefset_selector+'-shown'; \r","\r","\t\t\t/** Add prefset attribute prefsaet=\"true\"\r","\t\t\t * For identification for get\\set values\r","\t\t\t */\r","\t\t\tvar addPrefsetAttribute = (function()\r","\t\t\t{\r","\t\t\t\tself.$( prefset_selector ).element().setAttribute('prefset', true);\r","\t\t\t})();\r","\t\t\t/** Add caption\r","\t\t\t */\r"," \t\t\tvar addCaption = (function()\r","\t\t\t{\r","\t\t\t\tself.$( prefset_selector +' > caption').delete(); // delete menu if exists\r","\t\t\t\t\r","\t\t\t\tself.append( prefset_selector, self.create('caption', prefset_caption ) );\r","\t\t\t})();\r","\t\t\t\r","\t\t\t/** Ad Menu\r","\t\t\t */\r"," \t\t\tvar addMenu = (function()\r","\t\t\t{\r","\t\t\t\tself.$( prefset_selector +' menulist').delete(); // delete menu if exists\r","\t\t\t\t\r","\t\t\t\tself.append( prefset_selector, self.create('menulist', null, ['menupopup']) );\r","\t\t\t})();\r","\r","\t\t\t/** Create perfset_template\r","\t\t\t *\r","\t\t\t * @param\tobject\tcontrols_data\tContainer-id: {control id-label: value}\r","\t\t\t */\r","\t\t\tvar createContainer = function(container_index, container_label, controls_data)\r","\t\t\t{\r","\t\t\t\tvar controls_labels\t= Object.keys(controls_data);\r","\t\t\t\t//console.log(  'PREFSET_SELECTOR: ' + prefset_selector );\r","\t\t\t\t/** container\r","\t\t\t\t */\r","\t\t\t\tvar container = (function()\r","\t\t\t\t{\r","\t\t\t\t\tvar display\t= container_index===0 ? 'block'\t: 'none';\r","\t\t\t\t\tvar container\t= self.create( 'groupbox', {\r","\t\t\t\t\t\t\t\t\t\t\t'label': container_label,\t// sanitized label become id attribute, label is for save and restore element from prefs\r","\t\t\t\t\t\t\t\t\t\t\t'class': 'prefset-container',\t// class 'prefset-container' is for identification of container in prefset DOM\r","\t\t\t\t\t\t\t\t\t\t\t//'style': 'display:' + display\r","\t\t\t\t\t\t\t\t\t });\r","\t\t\t\t\t\r","\t\t\t\t\tself.$( '#'+container.getAttribute('id') ).delete(); // delete container if exists\r","\t\t\t\t\t\r","\t\t\t\t\tself.append( prefset_selector, container);\r","\t\t\t\t\t\t\r","\t\t\t\t\treturn container;\r","\t\t\t\t})(); \r","\t\t\t\t\r","\t\t\t\t/** addMenuItem\r","\t\t\t\t */\r","\t\t\t\tvar addMenuItem = (function()\r","\t\t\t\t{\r","\t\t\t\t\tvar toggle_containers =\r","\t\t\t\t\t[\r","\t\t\t\t\t\t\"var container_class_shown='\"+container_class_shown+\"'\",\r","\t\t\t\t\t\t\"var element_hide=document.getElementsByClassName(container_class_shown)[0]\",\r","\t\t\t\t\t\t\"var element_show=document.getElementById('\"+container.getAttribute('id')+\"')\",\r","\t\t\t\t\t\t\r","\t\t\t\t\t\t\"if(element_hide==element_show)return\", // return if clicked same element\r","\t\t\t\t\t\t\r","\t\t\t\t\t\t\"element_show.classList.add(container_class_shown)\", // show new container\r","\t\t\t\t\t\t\"element_show.style.display = 'block'\",\r","\t\t\t\t\r","\t\t\t\t\t\t\"element_hide.classList.remove(container_class_shown)\", // hide old element\r","\t\t\t\t\t\t\"element_hide.style.display = 'none'\",\r","\t\t\t\t\t];\r","\t\t\t\t\t\r","\t\t\t\t\tvar menu_item\t= self.create('menuitem', { 'id': container_label+'item', 'label': container_label, 'oncommand': toggle_containers.join(';')} );\r","\t\t\t\t\r","\t\t\t\t\tself.append( prefset_selector + ' menupopup', menu_item );\r","\t\t\t\t})(); \r","\t\t\t\t  \r","\t\t\t\t/** Append control to container\r","\t\t\t\t */\r","\t\t\t\tvar appendControlToContainer = function(index)\r","\t\t\t\t{\r","\t\t\t\t\tvar control_type\t= control_types[index];\r","\t\t\t\t\tvar control_data\t= {'label': controls_labels[index], 'value':controls_data[controls_labels[index]] };\r","\t\t\t\t\tvar control\t= self.create(control_type, control_data);\r","\t\t\t\t\t//console.log('control');\r","\t\t\t\t\t//console.log( control );\r","\t\t\t\t\t/** Add label if not checkbox \r","\t\t\t\t\t */\r","\t\t\t\t\tvar label = (function()\r","\t\t\t\t\t{\r","\t\t\t\t\t\tif( control_type==='checkbox' )\r","\t\t\t\t\t\t\treturn;\r","\t\t\t\t\t\t\r","\t\t\t\t\t\tvar hbox_label = self.create( 'hbox', null,[ 'label', {'value': controls_labels[index], 'control': control.getAttribute('id')} ] );\r","\t\t\t\t\t\t\t\t\t \r","\t\t\t\t\t\tself.append( '#'+container.getAttribute('id'), hbox_label );\r","\t\t\t\t\t\t\r","\t\t\t\t\t\treturn hbox_label;\r","\t\t\t\t\t})(); \r","\t\t\t\t\t\r","\t\t\t\t\tvar parent\t= label ? label : self.$('#'+container.getAttribute('id'));\r","\t\t\t\t\t\r","\t\t\t\t\tself.$(parent).append( control );\r","\t\t\t\t\t\r","\t\t\t\t\tself.append( '#'+container.getAttribute('id'), control );\t\t\t\t\t\r","\t\t\t\t}; \r","\t\t\t\t\r","\t\t\t\tfor(let c=0; c<controls_labels.length;c++)\r","\t\t\t\t\tappendControlToContainer(c);\r","\t\t\t};\r","\t\t\t\r","\t\t\tfor(let i=0; i<containers_ids.length;i++)\r","\t\t\t\tcreateContainer(i, containers_ids[i], perfset_values[containers_ids[i]] );\r","\t\t\t\r","\t\t\t/* SELECT MENU ITEM */\r","\t\t\t/** Select container\r","\t\t\t */\r","\t\t\tvar selectContainer = (function()\r","\t\t\t{\r","\t\t\t\tself.$( prefset_selector + ' menulist' ).element().selectedIndex = 1;\r","\t\t\t\t/* Hide containers  */\r","\t\t\t\tself.$(prefset_selector +' .prefset-container').each(function(index)\r","\t\t\t\t{\r","\t\t\t\t\t//console.log( this.getAttribute('id') + ' '+index );\r","\t\t\t\t\tif( index>0 )\r","\t\t\t\t\t\tthis.setAttribute('style', this.getAttribute('id') +';display:none;');\r","\t\t\t\t\telse\r","\t\t\t\t\t\tthis.classList.add( container_class_shown );\r","\t\t\t\t\t\r","\t\t\t\t\t//console.log( self.values( '#' + this.getAttribute('id') ) );\t\t\t\t\t\r","\t\t\t\t});\r","\t\t\t})(); \r","\t\t\t\r","\t\t\tconsole.log( self.$( prefset_selector ).element().outerHTML ); // DEBUG: get element as plain text\r","\t\t};\r","\t\t/** Create dropdown element\r","\t\t * @param\tstring\tid\tId of dropdown element\r","\t\t * @param\tobject\titems\tItems for dropdown \r","\t\t * @param\tstring\t[menu_text]\tText in dropdown menu button, if null then current item is shown\r","\t\t *\r","\t\t * @return\t[element](https://developer.mozilla.org/en-US/docs/Web/API/Element)\r","\t\t *\r","\t\t * @example dropdown('#dropdown_test',\t{'Item A':'alert(\"A\")','Item B':'alert(\"B\")'})\r","\t\t * @example dropdown('#dropdown_text_test',\t{'Item A':{tooltip: 'Item A'},'Item B':{style: 'border:green;'}}, 'Attributes & label')\r","\t\t *\r","\t\t */\r","\t\tthis.dropdown = function(id, items, menu_text=null)\r","\t\t{\r","\t\t\tvar menulist\t= menu_text ? self.create('button', {label: menu_text, type: \"menu\", id: sanitizeId(id) }) : self.create('menulist', {id: sanitizeId(id)});\r","\t\t\tvar menupopup\t= self.create('menupopup');\r","\r","\t\t\t/** Get item simple\r","\t\t\t */\r","\t\t\tvar getItemSimple = function(label, _attributes)\r","\t\t\t{\r","\t\t\t\tvar attributes = {label: label};\r","\t\t\t\t\r","\t\t\t\tif( typeof _attributes === 'object' ){\r","\t\t\t\t\tfor(var attr in _attributes)\r","\t\t\t\t\t\tif (_attributes.hasOwnProperty(attr))\r","\t\t\t\t\t\t\tattributes[attr] = _attributes[attr];\r","\t\t\t\t\t\t\t//var value = _attributes[attr];\r","\t\t\t\t}else\r","\t\t\t\t\tattributes.oncommand = _attributes;\r","\t\t\t\t\r","\t\t\t\treturn self.create('menuitem', attributes );\r","\t\t\t}; \r","\t\t\t\r","\t\t\tfor(var label in items)\r","\t\t\t\tif (items.hasOwnProperty(label))\r","\t\t\t\t\tmenupopup.appendChild( getItemSimple(label, items[label]) );\r","\t\t\t\t\t\r","\t\t\tmenulist.appendChild( menupopup );\r","\t\t\t\r","\t\t\t//console.log( menulist.outerHTML ); // DEBUG: get element as plain text\r","\r","\t\t\treturn  menulist;\r","\t\t}; \r","\t\t\r","\t\t/*---------------------------------------\r","\t\t\tPRIVATE\r","\t\t-----------------------------------------\r","\t\t*/\r","\t\t/** Get values from controls\r","\t\t */\r","\t\tvar getValues = function(selector, only_prefs=false)\r","\t\t{\r","\t\t\tconsole.log(  'getValues(): ' + selector );\r","\t\t\tvar values\t= {};\r","\r","\t\t\t/** Set to value to values object\r","\t\t\t */\r","\t\t\tvar setToValues = function(id, value)\r","\t\t\t{\r","\t\t\t\tif( value!==null )\r","\t\t\t\t\tvalues[id] = value;\r","\t\t\t};\r","\t\t\t\r","\t\t\t///** Get element value\r","\t\t\t// */\r","\t\t\t//var value = function(element)\r","\t\t\t//{\r","\t\t\t//\t/** Test if getting only preferences,\r","\t\t\t//\t* \t\tif so, then if control has not attribute prefs=\"false\"\r","\t\t\t//\t*/\r","\t\t\t//\tvar preference_test = only_prefs===false || element.getAttribute('prefs')!=='false';\r","\t\t\t//\t\r","\t\t\t//\t/** I control type node\r","\t\t\t//\t*/\r","\t\t\t//\tvar is_control_node = ['checkbox','textbox','radio'].indexOf( element.nodeName ) > -1;\r","\t\t\t//\t\r","\t\t\t//\t//if( element.id && is_control_node && preference_test )\r","\t\t\t//\tif( element.id && is_control_node )\r","\t\t\t//\t\treturn element.nodeName == 'checkbox' ? element.checked : element.value;\r","\t\t\t//\t\r","\t\t\t//\treturn null;\r","\t\t\t//}; \r","\r","\t\t\t/** Get prefset values\r","\t\t\t */\r","\t\t\tvar getPrefsetValues = function(prefset_id)\r","\t\t\t{\r","\t\t\t\tvar prefset_values\t= {};\r","\r","\t\t\t\t/** Loop containers\r","\t\t\t\t */\r","\t\t\t\tvar loopContainers = function()\r","\t\t\t\t{\r","\t\t\t\t\t/** Get elements values\r","\t\t\t\t\t */\r","\t\t\t\t\tvar getElementsValues = function(container)\r","\t\t\t\t\t{\r","\t\t\t\t\t\tvar prefset_values\t= {};\r","\r","\t\t\t\t\t\t$(container).children().each(function()\r","\t\t\t\t\t\t{\r","\t\t\t\t\t\t\tvar value = this.value( self );\r","\t\t\t\t\t\t\tif( value!==null )\r","\t\t\t\t\t\t\t\tprefset_values[self.id] = value;\r","\t\t\t\t\t\t});\r","\t\t\t\t\t\treturn prefset_values;\r","\t\t\t\t\t}; \r","\t\t\t\t\t\r","\t\t\t\t\tself.$('#'+prefset_id +' .prefset-container').each(function()\r","\t\t\t\t\t{\t\r","\t\t\t\t\t\tprefset_values[self.getAttribute('label')] = getElementsValues(self);\r","\t\t\t\t\t\t\r","\t\t\t\t\t});\r","\t\t\t\t}; \r","\t\t\t\tloopContainers();\r","\r","\t\t\t\treturn prefset_values;\r","\t\t\t};\r","\t\t\t\r","\t\t\t/** Get values form child nodes\r","\t\t\t * @param\tarray\tchild_nodes\tElement list of child nodes\r","\t\t\t */\r","\t\t\tvar loopNestedElements = function(child_nodes)\r","\t\t\t{\r","\t\t\t\tchild_nodes.each(function()\r","\t\t\t\t{\r","\t\t\t\t\tvar id\t= this.getAttribute('id');\r","\t\t\t\t\t\r","\t\t\t\t\tif( ! Object.keys(this.childNodes).length )\r","\t\t\t\t\t\tsetToValues( id, this.value(this) );\r","\t\t\t\t\t\t\t\t\r","\t\t\t\t\telse if( this.hasAttribute('prefset') )\r","\t\t\t\t\t\tsetToValues( id, getPrefsetValues(id) );\r","\t\t\r","\t\t\t\t\telse\r","\t\t\t\t\t\tloopNestedElements( $(this.childNodes) );\r","\t\t\t\t});\r","\t\t\t}; \r","\r","\t\t\tloopNestedElements( self.$(selector).children() );\r","\t\t\t\r","\t\t\treturn values;\r","\t\t};\r","\r","\t\t/** Get sanitized id\r","\t\t */\r","\t\tvar sanitizeId = function(id)\r","\t\t{\r","\t\t\treturn id.replace(/[^a-z0-9\\s-_]/gi, '').replace(/\\s+/gi, '_').trim().toLowerCase();\r","\t\t};\r","\t\r","\t}\r","\treturn UI;\r","\r","})();"],"version":"1.0.12","rank":100,"async":false,"type":"macro","trigger":"trigger_postopen"}